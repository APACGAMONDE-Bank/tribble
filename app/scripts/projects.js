"use strict";var app=angular.module("tribbleApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"",views:{description:{controller:"DescriptionCtrl as description",templateUrl:"templates/description.html"},container:{controller:"HomeCtrl as home",templateUrl:"templates/home.html"}}}),e.state("project",{url:"/project/:slug",views:{description:{controller:"DescriptionCtrl as description",templateUrl:"templates/description.html"},container:{controller:"ProjectCtrl as project",templateUrl:"templates/project.html"}}}),t.otherwise("")}]),app.service("projectSrv",["$http",function(e){this.projects=e.get("app/data/projects.json",{cache:!0}).then(function(e){return e.data}),this.getProjects=function(e){this.projects.then(function(t){e(t)})},this.getProject=function(e,t){for(var r=0;r<e.length;r++)if(e[r].slug===t)return e[r]}}]),app.controller("DescriptionCtrl",["$scope","$stateParams","projectSrv",function(e,t,r){e.slug=t.slug,e.slug&&r.getProjects(function(t){e.projects=t,e.project=r.getProject(e.projects,e.slug)})}]),app.controller("HomeCtrl",["$scope","projectSrv",function(e,t){t.getProjects(function(t){var r="https://github.com/codenameyau/tribble/",i="blob/master/public/projects/demo/";e.github=r+i,e.projects=t})}]),app.controller("ProjectCtrl",["$scope","$filter","$stateParams",function(e,t,r){e.slug=r.slug;var i=t("slugToCamel")(e.slug)+"Demo";window[i]()}]),app.filter("slugToCamel",function(){return function(e){return e.replace(/-(.)?/g,function(e){return e[1].toUpperCase()})}});var basicGridDemo=function(){var e=new Playground;e.enableGrid(40,4)},basicGeometryDemo=function(){function e(e,t){return this.geometry=new THREE.Geometry,this.geometry.vertices.push(new THREE.Vector3(-e,0,0)),this.geometry.vertices.push(new THREE.Vector3(e,0,0)),this.geometry.vertices.push(new THREE.Vector3(0,t,0)),this.geometry.faces.push(new THREE.Face3(0,1,2)),this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals(),this.geometry}function t(e){return this.geometry=new THREE.Geometry,this.geometry.vertices.push(new THREE.Vector3(-e,0,0)),this.geometry.vertices.push(new THREE.Vector3(e,0,0)),this.geometry.vertices.push(new THREE.Vector3(0,e,0)),this.geometry.faces.push(new THREE.Face3(0,1,2)),this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals(),this.geometry}var r=new Playground;r.enableGrid(20,4),r.setCameraPosition(0,40,60);var i=function(e,t,r){return this.geometry=new THREE.Geometry,this.geometry.vertices.push(new THREE.Vector3(-e,0,0)),this.geometry.vertices.push(new THREE.Vector3(e,0,0)),this.geometry.vertices.push(new THREE.Vector3(t,r,0)),this.geometry.faces.push(new THREE.Face3(0,1,2)),this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals(),this.geometry},n=new THREE.MeshBasicMaterial({side:THREE.DoubleSide}),o=new t(4),s=new THREE.Mesh(o,n);s.position.set(0,0,12);var a=new e(4,6),c=new THREE.Mesh(a,n);c.position.set(0,0,0);var E=new i(4,-6,7),h=new THREE.Mesh(E,n);h.position.set(0,0,-12),r.scene.add(s),r.scene.add(c),r.scene.add(h)},parthenonDemo=function(){var e=new Playground;e.enableGrid(120,5),e.setCameraPosition(0,30,230);var t,r={sides:18,faces:8,radius:2,height:28},i=4*r.radius,n=function(e,t,r){return e=e||8,t=t||8,r=r||10,this.geometry=new THREE.Geometry,this.geometry.vertices.push(new THREE.Vector3(-e,0,r)),this.geometry.vertices.push(new THREE.Vector3(e,0,r)),this.geometry.vertices.push(new THREE.Vector3(0,t,r)),this.geometry.vertices.push(new THREE.Vector3(-e,0,-r)),this.geometry.vertices.push(new THREE.Vector3(e,0,-r)),this.geometry.vertices.push(new THREE.Vector3(0,t,-r)),this.geometry.faces.push(new THREE.Face3(2,0,1)),this.geometry.faces.push(new THREE.Face3(5,4,3)),this.geometry.faces.push(new THREE.Face3(4,1,3)),this.geometry.faces.push(new THREE.Face3(1,0,3)),this.geometry.faces.push(new THREE.Face3(2,5,3)),this.geometry.faces.push(new THREE.Face3(2,3,0)),this.geometry.faces.push(new THREE.Face3(1,4,2)),this.geometry.faces.push(new THREE.Face3(2,4,5)),this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals(),this.geometry},o=function(e,i,n){var o=e.x||0,s=e.y||0,a=e.z||0;n=n||8;for(var c=new THREE.CylinderGeometry(r.radius,r.radius,r.height,32),E=0;n>E;E++){var h=new THREE.Mesh(c,i);h.position.set(o,r.height/2+s-1,a),t.add(h),o+=e.xSpace,a+=e.zSpace}},s=function(e,t,n,o){o=o||11711154;var s=(r.faces+e)*i,a=(r.sides+t)*i,c=new THREE.BoxGeometry(s,n,a),E=new THREE.MeshLambertMaterial({color:o});return new THREE.Mesh(c,E)},a=new THREE.AmbientLight(5921370),c=new THREE.PointLight(8158332),E=new THREE.PointLight(5395026),h=new THREE.PointLight(5395026);c.position.set(0,100,150),E.position.set(-250,120,80),h.position.set(250,120,80),e.scene.add(a),e.scene.add(c),e.scene.add(E),e.scene.add(h);var d=new THREE.MeshLambertMaterial({color:16448250});t=new THREE.Object3D;var l=2,m=s(1.3,2,l);m.position.y=l/2;var p=s(.8,1.5,l);p.position.y=m.position.y+l;var w=s(.3,1,l);w.position.y=p.position.y+l,t.add(m),t.add(p),t.add(w);var u=(r.faces-1)*r.radius*2,T=w.position.y,R=r.sides*r.radius*2,g={x:-u,xSpace:i,z:R,zSpace:0,y:T},H={x:-u,xSpace:i,z:-R,zSpace:0,y:T},y={x:-u,xSpace:0,z:-R,zSpace:i,y:T},v={x:u,xSpace:0,z:-R,zSpace:i,y:T};o(g,d,r.faces),o(H,d,r.faces),o(y,d,r.sides),o(v,d,r.sides);var f=3,M=5,b=s(0,1,f,14474460);b.position.y=T+r.height;var x=s(-.1,.8,M,11250603);x.position.y=b.position.y+f+1,t.add(b),t.add(x);var P=r.height/2.8,G=2*r.radius,C=G*r.faces,S=G*r.sides*1.05,j=new n(C,P,S),V=new THREE.Mesh(j,d);V.position.y=x.position.y+M/2,t.add(V),e.scene.add(t)},starfieldParticlesDemo=function(){var e=new Playground;e.camera.position.set(0,200,300);var t="projects/images/texture/stars/",r=[],i=function(t,r,i){t=t||200,i=i||8;for(var n=new THREE.Geometry,o=new THREE.PointCloudMaterial({size:i,map:r,blending:THREE.AdditiveBlending,transparent:!1}),s=0;t>s;s++){var a=500,c=200,E=e.utils.randomExclusive(-a,a),h=e.utils.randomExclusive(-c,c),d=e.utils.randomExclusive(-a,a);n.vertices.push(new THREE.Vector3(E,h,d))}return new THREE.PointCloud(n,o)},n=THREE.ImageUtils.loadTexture(t+"f-star.png"),o=THREE.ImageUtils.loadTexture(t+"m-star.png"),s=THREE.ImageUtils.loadTexture(t+"a-star.png");r.push(i(4e3,s,2)),r.push(i(1200,o,3)),r.push(i(1200,n,3)),r.push(i(100,o,5)),r.push(i(100,n,5)),r.push(i(30,n,8)),r.push(i(3,o,12));for(var a=0;a<r.length;a++)e.scene.add(r[a]);e.setAnimation(function(){r.forEach(function(e){e.rotation.y+=.0025,e.rotation.x+=.0035}),e.defaultAnimation()})},spotlightDemo=function(){var e=new Playground;e.setCameraPosition(0,120,400),e.renderer.shadowMapEnabled=!0,e.controls.center=new THREE.Vector3(0,30,0);var t={visibility:!0,intensity:2,exponent:10,red:.9,green:.9,blue:.85,x:0,y:120,z:300},r=function(e,t,r){e=e||20,t=t||20,r=r||13386563;var i=new THREE.PlaneGeometry(e,t),n=new THREE.MeshLambertMaterial({color:r,side:THREE.DoubleSide}),o=new THREE.Mesh(i,n);return o.rotation.x=Math.PI/180*-90,o.position.set(0,0,0),o.receiveShadow=!0,o},i=function(){E.position.set(t.x,t.y,t.z),E.distance=t.distance,E.intensity=t.intensity,E.intensity=t.intensity,E.shadowCameraVisible=t.visibility,e.defaultAnimation()},n=new dat.GUI({autoPlace:!1}),o=document.getElementById("dat-gui-container");o.appendChild(n.domElement),n.add(t,"x").min(-200).max(200).step(1),n.add(t,"y").min(40).max(250).step(1),n.add(t,"z").min(-200).max(300).step(1),n.add(t,"intensity").min(0).max(10).step(.1),n.add(t,"visibility");var s=300,a=100;e.scene.add(r(s,a));var c=r(s,a);c.rotation.x=0,c.position.set(0,50,-a/2),e.scene.add(c);var E=new THREE.SpotLight(new THREE.Color(t.red,t.green,t.blue));E.shadowCameraVisible=!0,E.castShadow=!0,E.position.set(t.x,t.y,t.z),E.intensity=t.intensity,e.scene.add(E);var h=new THREE.MeshLambertMaterial({color:15580257,transparent:!0,opacity:.7}),d=new THREE.CylinderGeometry(8,20,15,32,32),l=new THREE.Mesh(d,h);l.position.set(0,40,0),l.castShadow=!0,e.scene.add(l),e.setAnimation(i)},chaseCamDemo=function(){var e=new Playground;e.enableGrid(80,5),e.controls.enabled=!1;var t={x:0,y:10,z:40};e.setCameraPosition(t.x,t.y,t.z),e.camera.lookAt(e.scene.position);var r,i=new THREEx.KeyboardState,n=20,o=Math.PI/1.5,s=function(e,t){e=e||4,t=t||14342874;var r=new THREE.BoxGeometry(e,e,e),i=new THREE.MeshLambertMaterial({color:13421772}),n=new THREE.Mesh(r,i);return n.position.set(0,e/2,0),n},a=function(){var s=e.clock.getDelta(),a=n*s,c=o*s;i.pressed("w")&&r.translateZ(-a),i.pressed("s")&&r.translateZ(a),i.pressed("a")&&(r.rotation.y+=c),i.pressed("d")&&(r.rotation.y-=c);var E=new THREE.Vector3(t.x,t.y,t.z),h=E.applyMatrix4(r.matrixWorld);e.setCameraPosition(h.x,h.y,h.z),e.camera.lookAt(r.position),e.defaultAnimation()},c=new THREE.AmbientLight(5921370),E=new THREE.PointLight(8026746);E.position.set(0,50,-100),e.scene.add(c),e.scene.add(E),r=s(),e.scene.add(r),e.setAnimation(a)},windmillsDemo=function(){function e(){return this.geometry=new THREE.Geometry,this.geometry.vertices.push(new THREE.Vector3(0,15,0)),this.geometry.vertices.push(new THREE.Vector3(-1,2.5,0)),this.geometry.vertices.push(new THREE.Vector3(1,2.5,0)),this.geometry.vertices.push(new THREE.Vector3(0,2.5,.5)),this.geometry.vertices.push(new THREE.Vector3(0,2.5,-.5)),this.geometry.vertices.push(new THREE.Vector3(-.3,.3,0)),this.geometry.vertices.push(new THREE.Vector3(.3,.3,0)),this.geometry.faces.push(new THREE.Face3(3,0,1)),this.geometry.faces.push(new THREE.Face3(2,0,3)),this.geometry.faces.push(new THREE.Face3(1,0,4)),this.geometry.faces.push(new THREE.Face3(4,0,2)),this.geometry.faces.push(new THREE.Face3(5,3,1)),this.geometry.faces.push(new THREE.Face3(6,2,3)),this.geometry.faces.push(new THREE.Face3(6,3,5)),this.geometry.faces.push(new THREE.Face3(6,4,2)),this.geometry.faces.push(new THREE.Face3(5,1,4)),this.geometry.faces.push(new THREE.Face3(5,4,6)),this.geometry.computeFaceNormals(),this.geometry.computeVertexNormals(),this.geometry}function t(e){this.windmill=new THREE.Object3D,this.material=new THREE.MeshLambertMaterial({color:16448250}),this.height=e,this.createBlades(),this.createHub(),this.createGenerator(),this.createTower(),this.createPlatform()}var r=[],i={height:35},n=new Playground;n.controls.center=new THREE.Vector3(0,i.height/1.5,0),n.setCameraPosition(0,30,100),n.enableGrid(80,10),n.composer=new THREE.EffectComposer(n.renderer),n.composer.addPass(new THREE.RenderPass(n.scene,n.camera));var o=new THREE.ShaderPass(THREE.DotScreenShader);o.uniforms.scale.value=4,o.renderToScreen=!0,n.composer.addPass(o),t.prototype.createBlades=function(){this.blades=new THREE.Object3D;var t=new THREE.CylinderGeometry(1,1,1,16),r=new THREE.Mesh(t,this.material);r.rotation.x=n.utils.degToRad(90),this.blades.add(r);for(var i=new e,o=0,s=0;3>s;s++){var a=new THREE.Mesh(i,this.material);a.rotation.z=n.utils.degToRad(o),this.blades.add(a),o+=120}this.windmill.add(this.blades)},t.prototype.createHub=function(){var e=new THREE.SphereGeometry(1,16,16,Math.PI,Math.PI,0);this.hub=new THREE.Mesh(e,this.material),this.hub.rotation.x=n.utils.degToRad(180),this.hub.scale.z=2,this.hub.position.z=.45,this.windmill.add(this.hub)},t.prototype.createGenerator=function(){var e=new THREE.SphereGeometry(1,3,16,Math.PI,Math.PI,0);this.generator=new THREE.Mesh(e,this.material),this.generator.scale.z=6,this.generator.position.z=-.45,this.windmill.add(this.generator)},t.prototype.createTower=function(){var e=.7,t=new THREE.CylinderGeometry(e,e+.5,this.height,16);this.tower=new THREE.Mesh(t,this.material),this.tower.position.set(0,-this.height/2,-1.5),this.windmill.add(this.tower)},t.prototype.createPlatform=function(){var e=new THREE.BoxGeometry(10,1,10);this.platform=new THREE.Mesh(e,this.material),this.platform.position.set(0,-this.height,-1.5),this.windmill.add(this.platform)};var s=function(){for(var e=n.clock.getDelta(),t=0;t<r.length;t++)r[t].children[0].rotation.z-=1.5*e},a=new THREE.AmbientLight(8026746),c=new THREE.DirectionalLight(10132122);c.position.set(0,.4,.6),n.scene.add(a),n.scene.add(c);var E=new t(i.height);E.windmill.position.set(0,i.height+.5,0),n.scene.add(E.windmill),r.push(E.windmill);var h=new t(i.height);h.windmill.position.set(-30,i.height+.5,0),n.scene.add(h.windmill),r.push(h.windmill);var d=new t(i.height);d.windmill.position.set(30,i.height+.5,0),n.scene.add(d.windmill),r.push(d.windmill),n.setAnimation(function(){s(),n.controls.update(),n.composer.render(n.scene,n.camera)})},oceanDemo=function(){var e,t={texture:"projects/images/texture/",skybox:"projects/images/skybox/",water:"projects/images/texture/water/"},r={skybox:"skybox-sun.png",waterNormal:"water-clear.png",width:500,height:500,widthSegments:250,heightSegments:250,depth:200,param:4,filterparam:1},i=1/90,n=new Playground;n.setCameraPosition(0,20,200),n.setMaxCameraDistance(3e5),n.controls.center=new THREE.Vector3(0,50,0);var o=new THREE.AmbientLight(5921370),s=new THREE.DirectionalLight(16777045,1);s.position.set(-1,.5,-1),n.scene.add(o),n.scene.add(s);var a=new THREE.Texture([]);a.format=THREE.RGBFormat,a.flipY=!1;var c=new THREE.ImageLoader;c.load(t.skybox+r.skybox,function(e){var t=function(t,r){var i=512,n=document.createElement("canvas");n.width=i,n.height=i;var o=n.getContext("2d");return o.drawImage(e,-t*i,-r*i),n};a.image[0]=t(2,1),a.image[1]=t(0,1),a.image[2]=t(1,0),a.image[3]=t(1,2),a.image[4]=t(1,1),a.image[5]=t(3,1),a.needsUpdate=!0});var E=THREE.ShaderLib.cube;E.uniforms.tCube.value=a;var h=new THREE.ShaderMaterial({fragmentShader:E.fragmentShader,vertexShader:E.vertexShader,uniforms:E.uniforms,depthWrite:!1,side:THREE.BackSide}),d=new THREE.Mesh(new THREE.BoxGeometry(2e5,2e5,2e5),h);n.scene.add(d);var l=new THREE.ImageUtils.loadTexture(t.water+r.waterNormal);l.wrapS=l.wrapT=THREE.RepeatWrapping,e=new THREE.Water(n.renderer,n.camera,n.scene,{textureWidth:512,textureHeight:512,waterNormals:l,alpha:1,sunDirection:s.position.normalize(),sunColor:16777215,waterColor:7695,distortionScale:50});var m=new THREE.PlaneGeometry(500*r.width,500*r.height,50,50),p=new THREE.Mesh(m,e.material);p.add(e),p.rotation.x=.5*-Math.PI,n.scene.add(p),n.setAnimation(function(){e.material.uniforms.time.value+=i,e.render(),n.defaultAnimation()})},dippyBirdDemo=function(){var e=new Playground;e.enableGrid(60,10),e.controls.center=new THREE.Vector3(0,20,0);var t=function(){var e=26,t=new THREE.Object3D,r=new THREE.CylinderGeometry(7.5,5.5,e,16,16),i=new THREE.MeshLambertMaterial({color:13421772,transparent:!0,opacity:.4}),n=new THREE.Mesh(r,i),o=new THREE.CylinderGeometry(7,5,e-2,16,16),s=new THREE.MeshLambertMaterial({color:3517691}),a=new THREE.Mesh(o,s);return t.add(n),t.add(a),t.position.set(0,e/2,11),t},r=function(){var t=new THREE.Object3D,r=new THREE.Object3D,i=20,n=4,o=new THREE.Object3D,s=new THREE.MeshPhongMaterial({color:11743008}),a=new THREE.MeshPhongMaterial({color:15658734}),c=new THREE.MeshPhongMaterial({color:1118481}),E=new THREE.SphereGeometry(n,32,32),h=new THREE.CylinderGeometry(1.2,.5,6,32),d=new THREE.CircleGeometry(.8,16),l=new THREE.CircleGeometry(.4,16),m=new THREE.Mesh(E,s),p=new THREE.Mesh(h,s),w=new THREE.Mesh(d,a);w.scale.y=1.2;var u=w.clone(),T=new THREE.Mesh(l,c);T.scale.y=1.4;var R=T.clone();p.rotation.x=e.utils.degToRad(-90),p.position.set(0,0,6),w.position.set(-1.8,2,3.5),u.position.set(1.8,2,3.5),T.position.set(-1.8,2,3.55),R.position.set(1.8,2,3.55),o.add(m),o.add(p),o.add(w),o.add(u),o.add(T),o.add(R);var g=new THREE.MeshPhongMaterial({color:2521279}),H=new THREE.CylinderGeometry(n+1.5,n+1.5,.5,32),y=new THREE.CylinderGeometry(n-.5,n-.8,6,32),v=new THREE.Mesh(H,g),f=new THREE.Mesh(y,g);v.position.set(0,n-.5,0),f.position.set(0,n+3,0),o.add(v),o.add(f),o.position.set(0,i/2+n-.2,0);var M=new THREE.Object3D,b=new THREE.MeshLambertMaterial({color:2521279,transparent:!0,opacity:.5}),x=new THREE.CylinderGeometry(.8,.8,i,16),P=new THREE.SphereGeometry(3.5,16,16),G=new THREE.Mesh(x,b),C=new THREE.Mesh(P,b);C.scale.y=1.3,C.position.set(0,-4,0),G.position.set(0,i/2,0),M.add(G),M.add(C),M.position.set(0,-i/2,0),r.position.set(0,i+5,0),r.add(o),r.add(M);var S=new THREE.Object3D,j=6,V=i+5,D=new THREE.MeshLambertMaterial({color:11184810}),z=new THREE.MeshLambertMaterial({color:13421772}),F=new THREE.MeshLambertMaterial({color:12263970}),L=new THREE.CylinderGeometry(.6,.6,14.5,16),A=new THREE.BoxGeometry(1,i+2,5),N=new THREE.BoxGeometry(1,j,12),B=new THREE.BoxGeometry(12,1,12),I=new THREE.Mesh(L,D),k=new THREE.Mesh(A,z),U=k.clone(),W=new THREE.Mesh(N,F),O=W.clone(),$=new THREE.Mesh(B,F);return I.rotation.z=e.utils.degToRad(90),I.position.set(0,V,0),k.position.set(-6,17,0),U.position.set(6,17,0),W.position.set(-6,j/2,3),O.position.set(6,j/2,3),$.position.set(0,.5,3),S.add(I),S.add(k),S.add(U),S.add(W),S.add(O),S.add($),t.add(r),t.add(S),t.position.set(0,0,-10),t},i=new THREE.DirectionalLight(11184810),n=new THREE.DirectionalLight(11184810);i.position.set(0,.2,.5),n.position.set(.5,.8,0),e.scene.add(i),e.scene.add(n);var o=r();e.scene.add(o),e.scene.add(t());var s=o.children[0].rotation,a=new TWEEN.Tween(s).to({x:1.2},1200),c=new TWEEN.Tween(s).to({x:.9},1e3),E=new TWEEN.Tween(s).to({x:-.9},800),h=new TWEEN.Tween(s).to({x:.8},600),d=new TWEEN.Tween(s).to({x:-.8},900);a.chain(c),c.chain(E),E.chain(h),h.chain(d),d.chain(a),a.start(),e.setAnimation(function(){TWEEN.update(),e.defaultAnimation()})};